import{a as R}from"./chunk-ILB4YYHZ.js";import{H as I,I as V,J as z,K as k,L as D,M as T,N as U,O as $,P as B,Q as L,R as W,S as A,T as j}from"./chunk-Z6OHTYI4.js";import{i as w,l as y,o as S,p as E}from"./chunk-NHSNNNXZ.js";import{Bc as b,Cc as h,Db as l,Nb as n,Ob as g,Pb as u,Ra as p,Ua as d,Ub as M,Va as m,Vb as v,Wb as x,fa as f,ib as s,nb as c,sb as a,tb as e,ub as _,xc as P,zc as O}from"./chunk-6K4C2J2M.js";function H(o,i){if(o&1&&(a(0,"div",15)(1,"mat-icon",16),n(2,"done_all"),e(),a(3,"div",17)(4,"div",18),n(5,"Procesado"),e(),a(6,"div",19),n(7),v(8,"date"),e()()()),o&2){let t=l(2);d(7),g(x(8,1,t.video.processed_at,"medium"))}}function Y(o,i){if(o&1&&(a(0,"video",30),_(1,"source",31),n(2," Tu navegador no soporta el elemento video. "),e()),o&2){let t=l(3);d(),c("src",t.getVideoUrl(t.video,"processed"),p)}}function q(o,i){if(o&1&&(a(0,"video",30),_(1,"source",31),n(2," Tu navegador no soporta el elemento video. "),e()),o&2){let t=l(3);d(),c("src",t.getVideoUrl(t.video,"original"),p)}}function G(o,i){if(o&1&&(a(0,"div",27)(1,"h3",28)(2,"mat-icon"),n(3,"play_circle_filled"),e(),n(4," Ver Video "),e(),s(5,Y,3,1,"video",29)(6,q,3,1,"video",29),e()),o&2){let t=l(2);d(5),c("ngIf",t.video.processed_url),d(),c("ngIf",!t.video.processed_url&&t.video.original_url)}}function J(o,i){if(o&1&&(a(0,"a",35)(1,"button",36)(2,"mat-icon"),n(3,"download"),e(),n(4," Descargar Original "),e()()),o&2){let t=l(3);c("href",t.normalizeUrl(t.video.original_url),p)}}function K(o,i){if(o&1&&(a(0,"a",35)(1,"button",37)(2,"mat-icon"),n(3,"download"),e(),n(4," Descargar Procesado "),e()()),o&2){let t=l(3);c("href",t.normalizeUrl(t.video.processed_url),p)}}function Q(o,i){if(o&1&&(a(0,"div",32)(1,"h3",28)(2,"mat-icon"),n(3,"download"),e(),n(4," Descargas disponibles "),e(),a(5,"div",33),s(6,J,5,1,"a",34)(7,K,5,1,"a",34),e()()),o&2){let t=l(2);d(6),c("ngIf",t.video.original_url),d(),c("ngIf",t.video.processed_url)}}function X(o,i){if(o&1&&(a(0,"div",2)(1,"div",3)(2,"button",4)(3,"mat-icon"),n(4,"arrow_back"),e()(),a(5,"span",5),n(6,"Mis Videos / Detalle"),e()(),a(7,"mat-card",6)(8,"mat-card-header",7)(9,"div",8)(10,"mat-icon"),n(11,"play_circle_filled"),e()(),a(12,"mat-card-title",9),n(13),e(),a(14,"mat-card-subtitle",10)(15,"span",11)(16,"mat-icon",12),n(17),e(),n(18),e()()(),a(19,"mat-card-content",13)(20,"div",14)(21,"div",15)(22,"mat-icon",16),n(23,"upload"),e(),a(24,"div",17)(25,"div",18),n(26,"Fecha de subida"),e(),a(27,"div",19),n(28),v(29,"date"),e()()(),s(30,H,9,4,"div",20),a(31,"div",15)(32,"mat-icon",16),n(33,"how_to_vote"),e(),a(34,"div",17)(35,"div",18),n(36,"Votos recibidos"),e(),a(37,"div",21),n(38),e()()()(),s(39,G,7,2,"div",22)(40,Q,8,2,"div",23),e(),a(41,"mat-card-actions",24)(42,"button",25)(43,"mat-icon"),n(44,"arrow_back"),e(),n(45," Volver a Mis Videos "),e(),a(46,"button",26)(47,"mat-icon"),n(48,"public"),e(),n(49," Ver Videos P\xFAblicos "),e()()()()),o&2){let t=l();d(13),g(t.video.title),d(2),c("ngClass",t.getStatusClass(t.video.status)),d(2),g(t.getStatusIcon(t.video.status)),d(),u(" ",t.getStatusText(t.video.status)," "),d(10),g(x(29,9,t.video.uploaded_at,"medium")),d(2),c("ngIf",t.video.processed_at),d(8),g(t.video.votes||0),d(),c("ngIf",t.video.processed_url||t.video.original_url),d(),c("ngIf",t.video.original_url||t.video.processed_url)}}function Z(o,i){o&1&&(a(0,"div",38)(1,"mat-card")(2,"mat-card-content",39)(3,"mat-icon",40),n(4,"video_library"),e(),a(5,"p"),n(6,"Cargando detalles del video..."),e()()()())}var F=class o{constructor(i,t){this.route=i;this.videoService=t}video=null;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.videoService.getVideoById(i).subscribe({next:t=>{this.video=t},error:t=>{console.error("Error fetching video detail",t)}})}normalizeUrl(i){if(!i)return null;let t=String(i);if(t.startsWith("http://")||t.startsWith("https://"))return t;let r=E.apiUrl?.replace(/\/$/,"");return r?`${r}${t.startsWith("/")?"":"/"}${t}`:t}getVideoUrl(i,t){let r=t==="processed"?i.processed_url:i.original_url;if(!r)return null;let C="http://localhost:9090";if(r.startsWith("http"))return r;if(r.startsWith("/uploads")||r.startsWith("uploads")){let N=r.startsWith("/")?r:"/"+r;return`${C}${N}`}return`${C}/${r}`}getStatusClass(i){let t=(i||"").toLowerCase();return t==="processed"?"status-processed":t==="processing"?"status-processing":"status-uploaded"}getStatusIcon(i){let t=(i||"").toLowerCase();return t==="processed"?"check_circle":t==="processing"?"autorenew":"upload"}getStatusText(i){let t=(i||"").toLowerCase();return t==="processed"?"Procesado":t==="processing"?"Procesando":"Subido"}static \u0275fac=function(t){return new(t||o)(m(w),m(R))};static \u0275cmp=f({type:o,selectors:[["app-video-detail"]],standalone:!0,features:[M],decls:2,vars:2,consts:[["class","video-detail-container",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"video-detail-container"],[1,"breadcrumb"],["mat-icon-button","","routerLink","/dashboard/videos",1,"back-btn"],[1,"breadcrumb-text"],[1,"video-card"],[1,"card-header"],["mat-card-avatar","",1,"video-avatar"],[1,"video-title"],[1,"video-subtitle"],[1,"status-badge",3,"ngClass"],[1,"status-icon"],[1,"card-content"],[1,"info-grid"],[1,"info-item"],[1,"info-icon"],[1,"info-content"],[1,"info-label"],[1,"info-value"],["class","info-item",4,"ngIf"],[1,"info-value","votes-count"],["class","video-player-section",4,"ngIf"],["class","download-section",4,"ngIf"],[1,"card-actions"],["mat-stroked-button","","color","primary","routerLink","/dashboard/videos",1,"action-btn"],["mat-flat-button","","color","accent","routerLink","/dashboard/public/videos",1,"action-btn"],[1,"video-player-section"],[1,"section-title"],["controls","","class","video-player","preload","none","crossorigin","anonymous",4,"ngIf"],["controls","","preload","none","crossorigin","anonymous",1,"video-player"],["type","video/mp4",3,"src"],[1,"download-section"],[1,"download-buttons"],["target","_blank","download","",3,"href",4,"ngIf"],["target","_blank","download","",3,"href"],["mat-stroked-button","","color","primary",1,"download-btn"],["mat-flat-button","","color","accent",1,"download-btn"],[1,"loading-state"],[1,"loading-content"],[1,"loading-icon"]],template:function(t,r){t&1&&s(0,X,50,12,"div",0)(1,Z,7,0,"div",1),t&2&&(c("ngIf",r.video),d(),c("ngIf",!r.video))},dependencies:[h,P,O,b,S,y,$,I,D,U,z,T,k,V,W,B,L,j,A],styles:[".video-detail-container[_ngcontent-%COMP%]{max-width:800px;margin:24px auto;padding:0 16px}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:24px}.breadcrumb[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{color:#1976d2}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-text[_ngcontent-%COMP%]{color:#666;font-size:14px;font-weight:500}.video-card[_ngcontent-%COMP%]{box-shadow:0 4px 12px #0000001a;border-radius:12px;overflow:hidden}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:24px}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-avatar[_ngcontent-%COMP%]{background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;width:48px;height:48px}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin:0;color:#fff!important}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-subtitle[_ngcontent-%COMP%]{margin-top:8px}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-subtitle[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:500}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-subtitle[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:16px}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-subtitle[_ngcontent-%COMP%]   .status-badge.status-uploaded[_ngcontent-%COMP%]{background:#ff980033;color:#ff9800;border:1px solid rgba(255,152,0,.3)}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-subtitle[_ngcontent-%COMP%]   .status-badge.status-processed[_ngcontent-%COMP%]{background:#4caf5033;color:#4caf50;border:1px solid rgba(76,175,80,.3)}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-subtitle[_ngcontent-%COMP%]   .status-badge.status-processing[_ngcontent-%COMP%]{background:#2196f333;color:#2196f3;border:1px solid rgba(33,150,243,.3)}.video-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:32px 24px}.video-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.video-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:20px;background:#fafafa;border-radius:12px;border-left:4px solid #1976d2}.video-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:24px;margin-top:2px}.video-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;font-weight:600;letter-spacing:.5px;margin-bottom:4px}.video-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:16px;color:#333;font-weight:500}.video-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-value.votes-count[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1976d2}.video-card[_ngcontent-%COMP%]   .video-player-section[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:24px;margin-bottom:24px}.video-card[_ngcontent-%COMP%]   .video-player-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 20px;font-size:18px;font-weight:600;color:#333}.video-card[_ngcontent-%COMP%]   .video-player-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:24px}.video-card[_ngcontent-%COMP%]   .video-player-section[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;border-radius:8px;background:#000;box-shadow:0 4px 12px #0000001a}.video-card[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:24px}.video-card[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 20px;font-size:18px;font-weight:600;color:#333}.video-card[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.video-card[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .download-buttons[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.video-card[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .download-buttons[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;border-radius:8px;font-weight:500;transition:all .3s ease}.video-card[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .download-buttons[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0003}.video-card[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .download-buttons[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.video-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{background:#f5f5f5;padding:20px 24px;display:flex;gap:16px;flex-wrap:wrap}.video-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;border-radius:8px;font-weight:500}.video-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.loading-state[_ngcontent-%COMP%]{max-width:800px;margin:24px auto;padding:0 16px}.loading-state[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:12px}.loading-state[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.loading-state[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-icon[_ngcontent-%COMP%]{font-size:48px;color:#1976d2;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}@media (max-width: 768px){.video-detail-container[_ngcontent-%COMP%]{margin:16px auto;padding:0 12px}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:20px 16px}.video-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .video-title[_ngcontent-%COMP%]{font-size:20px}.video-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:24px 16px}.video-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.video-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:16px;flex-direction:column}.video-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.download-buttons[_ngcontent-%COMP%]{flex-direction:column}.download-buttons[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};export{F as VideoDetailComponent};
